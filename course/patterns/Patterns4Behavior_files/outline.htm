<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1255">
<meta name=ProgId content=PowerPoint.Slide>
<meta name=Generator content="Microsoft PowerPoint 9">
<link id=Main-File rel=Main-File href="../Patterns4Behavior.htm">
<link rel=Preview href=preview.wmf>
<meta name=Robots content=NoIndex>
<script src=script.js></script><script><!--

if( !(IsWin("PPTOtl")||IsWin("PPTNav")||IsWin("PPTOtlNav")) )
{
	obj = document.all.item("Main-File")
	parent.location.href=obj.href
}

var gOtlHiliteClr="#000000",gOtlNormalClr="#FFFFFF",gOtlActiveClr="#0000FF",gSelected="",gTxtState=false,gChildEntryTable=new Array()

function Load()
{
	if( IsWin("PPTOtl" ) ){ LoadOtl(); parent.gOtlLoaded=true; return }
	if( IsWin("PPTNav" ) ){ LoadNav("NavObj",UpdNav); parent.gNavLoaded=true; return }
	if( IsWin("PPTOtlNav" ) ){ LoadNav("OtlNavObj",UpdOtlNav); parent.gOtlNavLoaded=true; return }
}
function Upd(){ if( IsWin("PPTNav") ) LoadNav("NavObj",UpdNav) }
function LoadNav( oId,UpdFunc )
{
	document.ondragstart=CancelDrag
	document.onselectstart=CancelDrag
	document.body.style.margin=2
	UpdFunc()
	obj=document.all.item(oId)
	obj.style.display="block"
	obj.style.visibility="visible"
	document.bgColor="threedface"
}
function LoadOtl()
{
	document.ondragstart=CancelDrag
	document.onselectstart=CancelDrag
	OtlObj.style.display="block"
	OtlObj.style.visibility="visible"
	if( gOtlActiveClr == "" ) gOtlActiveClr=document.linkColor
	if( gOtlHiliteClr == "" ) gOtlHiliteClr=document.fgColor
	if( gOtlNormalClr == "" )
		gOtlNormalClr=document.bgColor
	else
		document.bgColor=gOtlNormalClr  

	InitArray()

	if( ObjExists( parent.gCurSld ) ) {
		ChangeState( parent.gCurSld,gOtlNormalClr,gOtlHiliteClr )
		gSelected=parent.gCurSld
	}
	else gSelected = -1

	UpdOtl()
}
function UpdOtl(){ UpdIdx(parent.gCurSld) }
function UpdIdx( idx )
{
	if( gSelected != idx ) {
		if( gSelected > 0 )
			ChangeState( gSelected,gOtlHiliteClr,gOtlNormalClr )

		if( ObjExists( idx ) ) {
			gSelected = idx
			ChangeState( gSelected,gOtlNormalClr,gOtlHiliteClr )
		}
		else gSelected = -1
	}

	if( gTxtState != parent.gOtlTxtExp ) {
		state = "block"
		if( !parent.gOtlTxtExp )
			state="none"

		for(ii=0; ii<gChildEntryTable.length; ii++) {
			obj=gChildEntryTable[ii];
			if( obj.id == null ) continue;

			if( obj.id.indexOf("PPTC") >= 0 )
				obj.style.display=state;
		} 
		gTxtState=parent.gOtlTxtExp
		if( ObjExists( gSelected ) )
			ChangeState( gSelected,gOtlNormalClr,gOtlHiliteClr )
	}
}
function InitArray()
{
	count=0
	for(ii=0; ii<document.all.tags("DIV").length; ii++) {
		obj=document.all.tags("DIV").item(ii)
		if( obj.id == null ) continue

		if( obj.id.indexOf("PPTC") >= 0 ) {   
			gChildEntryTable[count++]=obj
			obj.children.tags("TABLE").item(0).style.borderColor=gOtlNormalClr
		}
	}
}
function ChangeState( idx,fgColor,bgColor )
{
	obj=document.all.item("PPTL"+idx)
	obj.style.color=fgColor

	obj=document.all.item("PPTP"+idx)
	obj.style.backgroundColor=bgColor

	obj=document.all.item("PPTB"+idx)
	if( obj )
		obj.style.borderLeftColor=obj.style.borderBottomColor=bgColor
}
function ChgClr( o,clr ){ if( o.id != "PPTL"+gSelected ) o.style.color=clr }
function Over( obj ){ ChgClr(obj,gOtlActiveClr) }
function Out( obj ){ ChgClr(obj,gOtlHiliteClr) }
function ObjExists( ii ) { obj=document.all("PPTP"+ii ); return( obj ) }
function GoToSld( href ){ UpdIdx(parent.GetSldNum(href)); parent.GoToSld( href ) }
function CancelDrag(){ window.event.cancelBubble=true;window.event.returnValue=false}

function UpdNav()
{
	txt = "<center>";
	if( parent.GetHrefObj( parent.gCurSld ).mOrigVis == 1 )
		txt += "Slide " + parent.GetCurSldNum() + " of " + parent.GetNumSlds()
	else
		txt += "Hidden Slide"
	txt += "</center>";
	nav_text.innerHTML = txt;

	if( !parent.HasPrevSld() )
		gBtnArr["nb_prev"].Enabled(0)
	else
		gBtnArr["nb_prev"].Enabled(1)

	if( !parent.HasNextSld() )
		gBtnArr["nb_next"].Enabled(0)
	else
		gBtnArr["nb_next"].Enabled(1)
	gBtnArr["nb_nts"].SetEnabled()
	gBtnArr["nb_nts"].SetFlag( parent.gHasNts )

	gBtnArr["nb_sldshw"].Enabled(1)
	gBtnArr["nb_voice"].Enabled(1)
}

function UpdOtlNav()
{
	gBtnArr["nb_otl"].SetEnabled();

	if( parent.gOtlOpen )
		gBtnArr["nb_otlTxt"].Enabled( true );
	else
		document.all.item("nb_otlTxtBorder").style.visibility = "hidden";
}



//-->
</script>
<style>
<!--.PTxt
	{position:relative;
	width:100%;
	margin-top:5px;
	padding-left:5px;
	font-weight:bold;}
.CTxt
	{position:relative;
	width:100%;
	padding-left:10px;}
.CBorder
	{position:relative;
	width:100%;
	border-style:solid;
	border-width:1px;
	border-color:white;
	padding-bottom:5px;}
a
	{color:black;
	text-decoration:none;}
.button
	{position:absolute;
	width:32px;
	height:20px;
	border-style:solid;
	border-width:1px;
	border-color:threedface;}
-->
</style>
</head>

<body onload="Load()">

<div id=NavObj onload="Load()" onmouseover="BtnOnOver()"
onmousedown="BtnOnDown()" onmouseout="BtnOnOut()" onmouseup="BtnOnUp()"
onkeypress="_KPH()" style='display:none;visibility:hidden'>

<table style='position:absolute;width:70px;visibility:hidden' align=left
 cellpadding=0 cellspacing=0>
 <td nowrap>
 <div id="nb_ntsElem" align=center style='position:relative;padding:3px;
 font-family:Arial;color:buttontext;font-size:9pt'><img src="notes_flag.gif"
 border=0 id="notes_flag" style='display:none'><span style="mso-spacerun:
 yes">&nbsp; </span>Notes</div>
 <div title="Show/Hide Notes" id="nb_nts" style='position:absolute;top:0%;
 left:0%;width:100%;height:100%'></div>
 </td>
</table>

<table style='position:relative' align=right cellpadding=0 cellspacing=0>
 <td>
 <div id="nb_sldshwBorder" style='position:absolute;left:-20px;width:20px;
 height:20px'>
 <div style='position:absolute;clip:rect(0px, 18px, 18px, 0px)'><img
 src=buttons.gif id="nb_sldshw" title="Full Screen Slide Show"
 style='position:relative;left:-254px'></div>
 </div>
 </td>
 <td>
 <div id="nb_voiceBorder" style='display:none;position:absolute;left:-40px;
 width:20px;height:20px'>
 <div style='position:absolute;clip:rect(0px, 18px, 18px, 0px)'><img
 src=buttons.gif id="nb_voice" title="Pause/Play Narration" style='position:
 relative;left:-290px'></div>
 </div>
 </td>
</table>

<table style='position:relative' align=center cellpadding=0 cellspacing=0>
 <td nowrap>
 <div id="nb_prevBorder" class=button style='left:-30px'>
 <div style='position:absolute;clip:rect(0px, 30px, 18px, 0px)'><img
 src=buttons.gif id="nb_prev" title="Previous Slide" style='position:relative;
 left:0px'></div>
 </div>
 <span id="nav_text" style='position:relative;top:3px;width:100px;font-family:
 Arial;color:buttontext;font-size:9pt'></span>
 <div id="nb_nextBorder" class=button>
 <div style='position:absolute;clip:rect(0px, 30px, 18px, 0px)'><img
 src=buttons.gif id="nb_next" title="Next Slide" style='position:relative;
 left:-90px'></div>
 </div>
 </td>
</table>

</div>

<div id=OtlNavObj onload="Load()" onmouseover="BtnOnOver()"
onmousedown="BtnOnDown()" onmouseout="BtnOnOut()" onmouseup="BtnOnUp()"
onkeypress="_KPH()" style='display:none;visibility:hidden'>

<table style='position:relative;width:70px' align=left cellpadding=0
 cellspacing=0>
 <td nowrap>
 <div id="nb_otlElem" align=center style='position:relative;padding:3px;
 font-family:Arial;color:buttontext;font-size:9pt'>Outline</div>
 <div title="Show/Hide Outline" id="nb_otl" style='position:absolute;
 top:0%;left:0%;width:100%;height:100%'></div>
 </td>
</table>

<table style='position:relative' align=center cellpadding=0 cellspacing=0>
 <td>
 <div style='position:absolute;left:-18px;width:24px;height:20px;border-style:
 solid;border-width:1px;border-color:threedface' id="nb_otlTxtBorder">
 <div style='position:absolute;clip:rect(0px, 22px, 18px, 0px)'><img
 src=buttons.gif id="nb_otlTxt" title="Expand/Collapse Outline"
 style='position:relative;left:-157px'></div>
 </div>
 </td>
</table>

</div>

<div id=OtlObj style='display:none;visibility:hidden'>

<table width="100%" style='font-family:Arial;font-size:9pt'>
 <tr>
  <td>
  <div id=PPTP1 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0001.htm');" onmouseover="Over(this)"
  id=PPTL1 onmouseout="Out(this)">Design Patterns</a></font></div>
  <div id=PPTC1 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB1 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>David Talby</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP2 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0002.htm');" onmouseover="Over(this)"
  id=PPTL2 onmouseout="Out(this)">This Lecture</a></font></div>
  <div id=PPTC2 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB2 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=3><font size=2>More for a Document Editor</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=2><font size=2>Synchronizing Multiple Windows</font></td>
   </tr>
   <tr>
    <td colspan=3></td>
    <td colspan=1><font size=2>Observer</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=2><font size=2>Simplifying complex interactions</font></td>
   </tr>
   <tr>
    <td colspan=3></td>
    <td colspan=1><font size=2>Mediator</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=2><font size=2>Working on complex structures</font></td>
   </tr>
   <tr>
    <td colspan=3></td>
    <td colspan=1><font size=2>Iterator</font></td>
   </tr>
   <tr>
    <td colspan=3></td>
    <td colspan=1><font size=2>Visitor</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP3 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0020.htm');" onmouseover="Over(this)"
  id=PPTL3 onmouseout="Out(this)">12. Observer</a></font></div>
  <div id=PPTC3 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB3 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Define a one-to-many dependency between objects,
    so that changing one automatically updates others</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>For example, a spreadsheet and several charts of
    it are open</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Changing data in a window should be immediately
    reflected in all</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP4 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0021.htm');" onmouseover="Over(this)"
  id=PPTL4 onmouseout="Out(this)">The Requirements</a></font></div>
  <div id=PPTC4 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB4 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Document and Chart classes must not know each
    other, for reuse</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Easily add new kinds of charts or other links</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>A dynamic number of charts</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP5 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0022.htm');" onmouseover="Over(this)"
  id=PPTL5 onmouseout="Out(this)">The Solution</a></font></div>
  <div id=PPTC5 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB5 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Terminology</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Subject and Observer</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Publisher and Subscriber</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Listeners</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Subjects attach and detach listeners, and notify
    of events</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Clients update themselves after receiving a
    notification</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP6 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0023.htm');" onmouseover="Over(this)"
  id=PPTL6 onmouseout="Out(this)">The Solution II</a></font></div>
  <div id=PPTC6 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB6 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Here’s an abstract observer:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>class
    Observer {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void update() = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Concrete observers such as class Chart will
    inherit Observer</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP7 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0024.htm');" onmouseover="Over(this)"
  id=PPTL7 onmouseout="Out(this)">The Solution III</a></font></div>
  <div id=PPTC7 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB7 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Here’s the (concrete!) subject:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	class Subject {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void attach(Observer *o)</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>			{ observers.add(o); }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void detach(Observer *o)</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>			{ observers.remove(o); }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void notify() {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		<span style="mso-spacerun: yes">&nbsp;
    </span>for i in observers do</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>			o-&gt;update();</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	<span style="mso-spacerun: yes">&nbsp;
    </span>protected:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		List observers;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp;&nbsp;
    </span>}</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP8 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0044.htm');" onmouseover="Over(this)"
  id=PPTL8 onmouseout="Out(this)">The Solution IV</a></font></div>
  <div id=PPTC8 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB8 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Both subject and observer will usually inherit
    from other classes as well</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>If multiple inheritance is not available, the
    observer must be a separate class that has a reference to the chart object
    and updates it</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Java has a special mechanism – Inner classes –
    to make this easier</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP9 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0025.htm');" onmouseover="Over(this)"
  id=PPTL9 onmouseout="Out(this)">The UML</a></font></div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP10 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0026.htm');" onmouseover="Over(this)"
  id=PPTL10 onmouseout="Out(this)">The Fine Print</a></font></div>
  <div id=PPTC10 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB10 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Observing more than one subject</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Update must include an extra argument to tell
    who is updating</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Observing only certain events</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Attach must include an extra argument to tell
    which events interest this observer</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Observing small changes</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Update includes arguments to tell what changed,
    for efficiency</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP11 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0045.htm');" onmouseover="Over(this)"
  id=PPTL11 onmouseout="Out(this)">The Fine Print II</a></font></div>
  <div id=PPTC11 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB11 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Who calls Notify?</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Greedy – the subjects, on change</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Lazy – the observers, on query</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Common errors</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Forgetting to detach an object when it is
    destroyed</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Calling Notify in an inconsistent state</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Java includes Observer as part of the standard
    libraries</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>In package java.util</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP12 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0027.htm');" onmouseover="Over(this)"
  id=PPTL12 onmouseout="Out(this)">Known Uses</a></font></div>
  <div id=PPTC12 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB12 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>All frameworks of all kinds</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>MFC, COM, Java, EJB, MVC, …</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Handle user interface events</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Handle asynchronous messages</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP13 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0005.htm');" onmouseover="Over(this)"
  id=PPTL13 onmouseout="Out(this)">13. Mediator</a></font></div>
  <div id=PPTC13 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB13 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Encapsulate a complex interaction to preserve
    loose coupling</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Prevent many inter-connections between classes,
    which means that changing their behavior requires subclassing all of them</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>For example, a dialog box includes many
    interactions of its widgets. How do we reuse the widgets?</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP14 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0028.htm');" onmouseover="Over(this)"
  id=PPTL14 onmouseout="Out(this)">The Requirements</a></font></div>
  <div id=PPTC14 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB14 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>A widget is a kind of colleague</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Colleague don’t know about the interactions they
    participate in</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Can be reused for different dialogs</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Colleagues don’t know about others</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Allow only O(n) connections</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Easy to change interactions</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP15 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0029.htm');" onmouseover="Over(this)"
  id=PPTL15 onmouseout="Out(this)">The Solution</a></font></div>
  <div id=PPTC15 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB15 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>All colleagues talk with a mediator</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>The mediator knows all colleagues</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Whenever a colleague changes, it notifies its
    mediator</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>The mediator codes the interaction logic, and
    calls operations on other colleagues</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP16 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0030.htm');" onmouseover="Over(this)"
  id=PPTL16 onmouseout="Out(this)">The Solution II</a></font></div>
  <div id=PPTC16 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB16 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>An example interaction:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP17 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0031.htm');" onmouseover="Over(this)"
  id=PPTL17 onmouseout="Out(this)">The Solution III</a></font></div>
  <div id=PPTC17 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB17 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Only O(n) connections:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP18 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0034.htm');" onmouseover="Over(this)"
  id=PPTL18 onmouseout="Out(this)">The UML</a></font></div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP19 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0035.htm');" onmouseover="Over(this)"
  id=PPTL19 onmouseout="Out(this)">The Fine Print</a></font></div>
  <div id=PPTC19 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB19 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>The interaction logic (mediator) and colleagues
    can be reused separately and subclassed separately</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Protocols are simpler since n-to-1 relations
    replace n-to-m relations</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Abstract mediator class is unnecessary if
    there’s only one mediator</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Observer or mediator?</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>One-to-many or many-to-many?</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Should the logic be centralized?</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP20 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0036.htm');" onmouseover="Over(this)"
  id=PPTL20 onmouseout="Out(this)">Known Uses</a></font></div>
  <div id=PPTC20 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB20 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Widgets in a user interface</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Delphi and VB “hide” this pattern</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Connectivity constraints in diagrams</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP21 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0006.htm');" onmouseover="Over(this)"
  id=PPTL21 onmouseout="Out(this)">14. Iterator</a></font></div>
  <div id=PPTC21 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB21 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>without exposing its representation</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>An extremely common pattern</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>For example, a list should support forward and
    backward traversals</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Certainly not by exposing its internal data
    structure</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Adding traversal methods to List’s interface is
    a bad idea</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP22 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0037.htm');" onmouseover="Over(this)"
  id=PPTL22 onmouseout="Out(this)">The Requirements</a></font></div>
  <div id=PPTC22 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB22 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Traversal operations should be separate from List&lt;G&gt;’s
    interface</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Allow several ongoing traversals on the same
    container</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Reuse: it should be possible to write algorithms
    such as findItem that work on any kind of list</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP23 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0038.htm');" onmouseover="Over(this)"
  id=PPTL23 onmouseout="Out(this)">The Solution</a></font></div>
  <div id=PPTC23 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB23 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Define an abstract iterator class:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>class
    Iterator&lt;G&gt; {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void first() = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void next() = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		bool isDone() = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		G* item() = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP24 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0039.htm');" onmouseover="Over(this)"
  id=PPTL24 onmouseout="Out(this)">The Solution II</a></font></div>
  <div id=PPTC24 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB24 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Each data structure implementation will also
    implement an iterator class:</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>ListIterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>HashTableIterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>FileIterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>StringIterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Each data structure can offer more than one
    iterator:</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Forward and backward iterators</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Preorder, inorder, postorder</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP25 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0046.htm');" onmouseover="Over(this)"
  id=PPTL25 onmouseout="Out(this)">The Solution III</a></font></div>
  <div id=PPTC25 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB25 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>For example:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp;
    </span>class BackwardArrayIterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun:
    yes">&nbsp;&nbsp;&nbsp; </span>: public Iterator&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>{</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		Array&lt;G&gt; *container;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		int pos;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	 public:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	 	BackwardArrayIterator(Array *a)</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		<span style="mso-spacerun: yes">&nbsp;
    </span>{ container = a; first(); }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		next()</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		<span style="mso-spacerun: yes">&nbsp;
    </span>{ --pos; }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		// other methods easy</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp;&nbsp;
    </span>}</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP26 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0047.htm');" onmouseover="Over(this)"
  id=PPTL26 onmouseout="Out(this)">The Solution IV</a></font></div>
  <div id=PPTC26 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB26 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>A data structure’s interface should return
    iterators on itself:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	class List&lt;G&gt;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>{</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	<span style="mso-spacerun: yes">&nbsp; </span>Iterator&lt;G&gt;*
    getForwardIterator()</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun:
    yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>{ return new</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun:
    yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </span>ListForwardIterator(this); }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	<span style="mso-spacerun: yes">&nbsp;
    </span>Iterator&lt;G&gt;* getBackwardIterator()</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		 // similarly</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Now every LinkedList object can have many active
    iterators</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP27 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0049.htm');" onmouseover="Over(this)"
  id=PPTL27 onmouseout="Out(this)">The Solution V</a></font></div>
  <div id=PPTC27 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB27 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Writing functions for containers:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	void print(Iterator&lt;int&gt;* it)</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2><span style="mso-spacerun: yes">&nbsp; </span>{</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	<span style="mso-spacerun: yes">&nbsp; </span>for
    (it-&gt;first();<br>
    <span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </span>!it-&gt;isOver();<br>
    <span style="mso-spacerun: yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    </span>it-&gt;next())</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		 cout &lt;&lt; it-&gt;item();</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Using them:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	print(myList-&gt;getBackwardIterator());</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	print(myTable-&gt;getColumnItr(“Age”));</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	print(myTree-&gt;getPostOrderIterator());</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP29 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0050.htm');" onmouseover="Over(this)"
  id=PPTL29 onmouseout="Out(this)">The Requirements II</a></font></div>
  <div id=PPTC29 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB29 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Some iterators are generic:</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Traverse every n’th item</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Traverse items that pass a filter</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Traverse only first n items</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Traverse a computed view of items</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Such iterators should be coded once</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>It should be easy to combine such iterators and
    add new ones</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Their use should be transparent</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP30 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0051.htm');" onmouseover="Over(this)"
  id=PPTL30 onmouseout="Out(this)">The Solution</a></font></div>
  <div id=PPTC30 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB30 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Use the Decorator design pattern</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>For example, FilteredIterator&lt;G&gt; receives
    another iterator and the filtering function in its constructor</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>It delegates all calls to its internal iterator
    except first() and next():</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	void next() {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		do it-&gt;next()</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		while (!filter(it-&gt;item() &amp;&amp;<br>
    <span style="mso-spacerun:
    yes">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
    style="mso-spacerun: yes">&nbsp;</span>!it-&gt;isOver());</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	}</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP31 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0052.htm');" onmouseover="Over(this)"
  id=PPTL31 onmouseout="Out(this)">The Solution II</a></font></div>
  <div id=PPTC31 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB31 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>It is then easy to combine such generic
    iterators</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Print square roots of the first 100 positive
    elements in a list:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>print(new LimitedIterator(100,</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		 new ComputedIterator(sqrt,</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		 new FilteredIterator(positive,</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		 list-&gt;getForwardIterator()))));</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Adding an abstract DecoratorIterator reduces
    code size if many exist</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP32 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0040.htm');" onmouseover="Over(this)"
  id=PPTL32 onmouseout="Out(this)">The UML</a></font></div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP33 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0041.htm');" onmouseover="Over(this)"
  id=PPTL33 onmouseout="Out(this)">The Fine Print</a></font></div>
  <div id=PPTC33 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB33 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Everything is a container</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Character strings</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Files, both text and records</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Socket streams over the net</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>The result of a database query</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>The bits of an integer</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Stream of random or prime numbers</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>This allows reusing the print, find and other
    algorithms for all of these</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP34 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0053.htm');" onmouseover="Over(this)"
  id=PPTL34 onmouseout="Out(this)">The Fine Print II</a></font></div>
  <div id=PPTC34 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB34 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Iterators may have privileged access</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>They can encapsulate security rights</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Kinds of abstract iterators</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Direct access iterators</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Access the previous item</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Robustness issues</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Is the iterator valid after insertions or
    removals from the container?</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Iterators and the Composite pattern</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP35 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0043.htm');" onmouseover="Over(this)"
  id=PPTL35 onmouseout="Out(this)">Known Uses</a></font></div>
  <div id=PPTC35 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB35 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>All major standard libraries of popular
    programming languages</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>STL for C++</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>The new Java containers</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>New libraries for file, network and database
    access in C++ conform to STL’s iterators as well</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP36 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0054.htm');" onmouseover="Over(this)"
  id=PPTL36 onmouseout="Out(this)">15. Visitor</a></font></div>
  <div id=PPTC36 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB36 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Separate complex algorithms on a complex data
    structure from the structure’s representation</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>For example, a document is a composite structure
    involved in many complex operations</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Spell check, grammar check, hyphenation,
    auto-format, …</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>How do we avoid cluttering Glyph subclasses with
    all this code?</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP37 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0055.htm');" onmouseover="Over(this)"
  id=PPTL37 onmouseout="Out(this)">The Requirements</a></font></div>
  <div id=PPTC37 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB37 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Encapsulate complex algorithms and their data in
    one place</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Outside the data structure</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Easily support different behavior for every kind
    of Glyph</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Easily add new tools</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP38 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0056.htm');" onmouseover="Over(this)"
  id=PPTL38 onmouseout="Out(this)">The Solution</a></font></div>
  <div id=PPTC38 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB38 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Say hello to class Visitor:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>	class Visitor {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>	 public:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>		void visitImage(Image *i) { }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>		void visitRow(Row *r) { }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>		void visitTable(Table *t) { }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>		// so on for every Glyph type</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>	}</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Every tool is a subclass:</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>class SpellChecker : public Visitor</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP39 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0057.htm');" onmouseover="Over(this)"
  id=PPTL39 onmouseout="Out(this)">The Solution II</a></font></div>
  <div id=PPTC39 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB39 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Add to Glyph’s interface the ability to accept
    visitors:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	void accept(Visitor *v) = 0;</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>Every glyph subclass accepts a visitor by an
    appropriate callback:</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>	class Image : public Glyph {</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		void accept(Visitor *v)</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>		<span style="mso-spacerun: yes">&nbsp;
    </span>{ v-&gt;visitImage(this); }</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=1><font size=2>This way the visitor is activated for the right
    kind of glyph, with its data</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP40 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0058.htm');" onmouseover="Over(this)"
  id=PPTL40 onmouseout="Out(this)">The Solution III</a></font></div>
  <div id=PPTC40 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB40 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Initiating a spell check (one option):</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Create a SpellChecker object</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>root-&gt;accept(sc);</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Graphic non-text glyphs will just ignore the
    visit</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>This is why Visitor includes default empty
    method implementations</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Composite glyphs also do nothing</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>They can forward the visit to all their
    children. This can be coded once in CompositeGlyph</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP41 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0059.htm');" onmouseover="Over(this)"
  id=PPTL41 onmouseout="Out(this)">The Solution IV</a></font></div>
  <div id=PPTC41 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB41 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Easy to add operations</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Word count on characters</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Filters such as sharpen on images</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Page layout changes on pages</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Works on any glyph</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>In particular, a dynamic selection as long as
    it’s a composite glyph</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Adding a tool does not require recompilation of Glyph
    hierarchy</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP42 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0060.htm');" onmouseover="Over(this)"
  id=PPTL42 onmouseout="Out(this)">The UML</a></font></div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP43 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0061.htm');" onmouseover="Over(this)"
  id=PPTL43 onmouseout="Out(this)">The Fine Print</a></font></div>
  <div id=PPTC43 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB43 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>The big problem: adding new Glyph subclasses is
    hard</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Requires small addition of Visitor, and
    recompilation of all its subclasses</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>How do we traverse the structure?</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Using an iterator</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>From inside the accept() code</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>From inside the visitxxx() code</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Visitors are really just a workaround due to the
    lack of double dispatch</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP44 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0063.htm');" onmouseover="Over(this)"
  id=PPTL44 onmouseout="Out(this)">Known Uses</a></font></div>
  <div id=PPTC44 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB44 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Document Editors</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Spell Check, Auto-Format, …</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Photo Editors</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Filters &amp; Effects</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Compilers</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Code production, pretty printing, tests, metrics
    and optimizations<br>
    on the syntax tree</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
 <tr>
  <td>
  <div id=PPTP45 class=PTxt><font size=2><a
  href="javascript:GoToSld('slide0019.htm');" onmouseover="Over(this)"
  id=PPTL45 onmouseout="Out(this)">Summary</a></font></div>
  <div id=PPTC45 class=CTxt style='display:none'>
  <table style='color:black' id=PPTB45 class=CBorder>
   <tr>
    <td width=5 nowrap></td>
    <td width=20 nowrap></td>
    <td width="100%"></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Pattern of patterns</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Encapsulate the varying aspect</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Interfaces</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Inheritance describes variants</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Composition allows a dynamic choice between
    variants</font></td>
   </tr>
   <tr>
    <td colspan=1></td>
    <td colspan=2><font size=2>Design patterns are old, well known and
    thoroughly tested ideas</font></td>
   </tr>
   <tr>
    <td colspan=2></td>
    <td colspan=1><font size=2>Over twenty years!</font></td>
   </tr>
  </table>
  </div>
  </td>
 </tr>
</table>

</div>

</body>

</html>
